<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="theme-color" content="#000000">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>J.A.R.V.I.S. AI</title>
    <link rel="stylesheet" href="style.css">
    <script defer src="https://cdn.jsdelivr.net/npm/face-api.js@0.22.2/dist/face-api.min.js"></script>
</head>
<body>

    <!-- SPLASH SCREEN -->
    <div id="splash-screen">
        <div class="splash-content">
            <div class="splash-logo">J</div>
            <div class="splash-text">J.A.R.V.I.S.</div>
            <div class="splash-loading">
                <div class="splash-bar"></div>
            </div>
        </div>
    </div>

    <!-- MAIN APP -->
    <div id="app" class="hidden">
        
        <!-- TOP BAR -->
        <header class="top-bar">
            <button class="menu-btn" onclick="jarvis.toggleSidebar('left')">‚ò∞</button>
            <div class="logo-mini">J.A.R.V.I.S.</div>
            <button class="menu-btn" onclick="jarvis.toggleSidebar('right')">‚öôÔ∏è</button>
        </header>

        <!-- LEFT SIDEBAR (MEMORY) -->
        <aside class="sidebar left" id="sidebar-left">
            <div class="sidebar-header">
                <h3>üß† Memory Core</h3>
                <button class="close-sidebar" onclick="jarvis.toggleSidebar('left')">√ó</button>
            </div>
            
            <div class="memory-stats-real">
                <div class="stat-card">
                    <div class="stat-value" id="mem-usage">0 MB</div>
                    <div class="stat-label">Storage Used</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="mem-facts">0</div>
                    <div class="stat-label">Facts Stored</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="mem-convos">0</div>
                    <div class="stat-label">Conversations</div>
                </div>
            </div>

            <div class="memory-visual">
                <div class="brain-visual" id="brain-visual">
                    <div class="brain-node" style="--delay:0s"></div>
                    <div class="brain-node" style="--delay:0.2s"></div>
                    <div class="brain-node" style="--delay:0.4s"></div>
                    <div class="brain-node" style="--delay:0.6s"></div>
                </div>
                <div class="memory-bar">
                    <div class="memory-fill" id="memory-fill"></div>
                </div>
                <div class="memory-text" id="memory-text">0% used</div>
            </div>

            <div class="user-profile-section">
                <h4>üë§ User Profile</h4>
                <div class="profile-item">
                    <span>Name:</span>
                    <span id="profile-name">Unknown</span>
                </div>
                <div class="profile-item">
                    <span>Age:</span>
                    <span id="profile-age">-</span>
                </div>
                <div class="profile-item">
                    <span>Location:</span>
                    <span id="profile-location">-</span>
                </div>
                <div class="profile-item">
                    <span>Mood:</span>
                    <span id="profile-mood">Neutral</span>
                </div>
            </div>

            <div class="stored-facts">
                <h4>üíæ Stored Facts</h4>
                <div id="facts-list" class="facts-scroll">
                    <div class="empty-facts">No facts stored yet</div>
                </div>
            </div>
        </aside>

        <!-- MAIN CHAT AREA -->
        <main class="chat-area">
            <!-- AVATAR / VISUALIZER -->
            <div class="avatar-section">
                <div class="jarvis-avatar" id="jarvis-avatar">
                    <div class="avatar-face">
                        <div class="eye left"></div>
                        <div class="eye right"></div>
                        <div class="mouth"></div>
                    </div>
                    <div class="avatar-ring ring-1"></div>
                    <div class="avatar-ring ring-2"></div>
                    <div class="avatar-ring ring-3"></div>
                    <div class="sound-waves" id="sound-waves"></div>
                </div>
                <div class="status-text" id="status-text">Tap to speak</div>
            </div>

            <!-- MESSAGES -->
            <div class="messages-container" id="messages-container">
                <div class="welcome-msg">
                    <h2>Hello, I'm J.A.R.V.I.S.</h2>
                    <p>Your personal AI assistant. I remember everything you tell me.</p>
                    <div class="quick-chips">
                        <button onclick="jarvis.quickSend('What can you do?')">What can you do?</button>
                        <button onclick="jarvis.quickSend('Remember my name is')">Set my name</button>
                        <button onclick="jarvis.quickSend('Play quiz game')">Play game</button>
                        <button onclick="jarvis.startChat()">Start chatting</button>
                    </div>
                </div>
            </div>

            <!-- INPUT AREA -->
            <div class="input-section">
                <div class="input-box">
                    <input type="text" id="chat-input" placeholder="Type or tap microphone..." autocomplete="off">
                    <button class="send-btn" onclick="jarvis.send()">‚û§</button>
                </div>
                <div class="input-actions">
                    <button class="action-btn voice-btn" id="voice-btn" onclick="jarvis.toggleVoice()">üé§</button>
                    <button class="action-btn" onclick="jarvis.toggleCamera()">üì∑</button>
                    <button class="action-btn" onclick="jarvis.showApps()">üì±</button>
                </div>
            </div>
        </main>

        <!-- RIGHT SIDEBAR (SETTINGS & API) -->
        <aside class="sidebar right" id="sidebar-right">
            <div class="sidebar-header">
                <h3>‚öôÔ∏è Settings</h3>
                <button class="close-sidebar" onclick="jarvis.toggleSidebar('right')">√ó</button>
            </div>

            <div class="settings-section">
                <h4>üé® Appearance</h4>
                <select id="theme-select" onchange="jarvis.setTheme(this.value)">
                    <option value="jarvis">J.A.R.V.I.S. Blue</option>
                    <option value="friday">F.R.I.D.A.Y. Orange</option>
                    <option value="ultron">Ultron Red</option>
                    <option value="vision">Vision Green</option>
                    <option value="dark">Dark Mode</option>
                </select>
            </div>

            <div class="settings-section">
                <h4>üîä Voice Settings</h4>
                <label class="toggle-label">
                    <span>Text-to-Speech</span>
                    <input type="checkbox" id="tts-toggle" checked onchange="jarvis.toggleTTS()">
                    <span class="toggle"></span>
                </label>
                <label class="toggle-label">
                    <span>Speech Recognition</span>
                    <input type="checkbox" id="stt-toggle" checked onchange="jarvis.toggleSTT()">
                    <span class="toggle"></span>
                </label>
                <label class="toggle-label">
                    <span>Auto-Speak Responses</span>
                    <input type="checkbox" id="auto-speak-toggle" checked onchange="jarvis.toggleAutoSpeak()">
                    <span class="toggle"></span>
                </label>
            </div>

            <div class="api-section">
                <h4>üîå API Configuration</h4>
                
                <!-- OpenRouter API -->
                <div class="api-card">
                    <div class="api-header">
                        <span>üåê OpenRouter AI</span>
                        <span class="api-badge" id="badge-openrouter">OFFLINE</span>
                    </div>
                    <input type="password" id="api-openrouter" placeholder="sk-or-v1-...">
                    <select id="openrouter-model" onchange="jarvis.saveModel()">
                        <option value="deepseek/deepseek-chat">DeepSeek V3</option>
                        <option value="anthropic/claude-3.5-sonnet">Claude 3.5 Sonnet</option>
                        <option value="openai/gpt-4o">GPT-4o</option>
                        <option value="google/gemini-pro">Gemini Pro</option>
                        <option value="meta-llama/llama-3.1-70b-instruct">Llama 3.1 70B</option>
                        <option value="mistralai/mistral-large">Mistral Large</option>
                        <option value="nousresearch/hermes-3-llama-3.1-405b">Hermes 3 405B</option>
                        <option value="gryphe/mythomax-l2-13b">MythoMax L2 13B</option>
                    </select>
                    <button onclick="jarvis.testAPI('openrouter')">Test & Save</button>
                </div>

                <div class="api-card">
                    <div class="api-header">
                        <span>üß† DeepSeek AI</span>
                        <span class="api-badge" id="badge-deepseek">OFFLINE</span>
                    </div>
                    <input type="password" id="api-deepseek" placeholder="sk-...">
                    <button onclick="jarvis.testAPI('deepseek')">Test & Save</button>
                </div>

                <div class="api-card">
                    <div class="api-header">
                        <span>üå§Ô∏è Weather</span>
                        <span class="api-badge" id="badge-weather">OFFLINE</span>
                    </div>
                    <input type="password" id="api-weather" placeholder="OpenWeatherMap API key">
                    <button onclick="jarvis.testAPI('weather')">Test & Save</button>
                </div>

                <div class="api-card">
                    <div class="api-header">
                        <span>üì∞ News</span>
                        <span class="api-badge" id="badge-news">OFFLINE</span>
                    </div>
                    <input type="password" id="api-news" placeholder="NewsAPI key">
                    <button onclick="jarvis.testAPI('news')">Test & Save</button>
                </div>
            </div>

            <div class="settings-section">
                <h4>‚ö†Ô∏è Limitations</h4>
                <div class="limitation-list">
                    <div class="limit-item">
                        <span>‚ùå</span>
                        <span>Can't change system settings</span>
                    </div>
                    <div class="limit-item">
                        <span>‚ùå</span>
                        <span>Can't access contacts/SMS</span>
                    </div>
                    <div class="limit-item">
                        <span>‚ùå</span>
                        <span>Can't control Bluetooth/WiFi</span>
                    </div>
                    <div class="limit-item">
                        <span>‚úÖ</span>
                        <span>Can use camera & microphone</span>
                    </div>
                    <div class="limit-item">
                        <span>‚úÖ</span>
                        <span>Can store data locally</span>
                    </div>
                </div>
                <p class="native-app-msg">For full phone control, a native Android app is needed.</p>
            </div>

            <button class="danger-btn" onclick="jarvis.clearAllData()">üóëÔ∏è Clear All Data</button>
        </aside>

    </div>

    <!-- OVERLAYS - OUTSIDE APP CONTAINER -->
    
    <!-- CAMERA OVERLAY -->
    <div class="camera-overlay hidden" id="camera-overlay">
        <video id="camera-video" autoplay playsinline muted></video>
        <canvas id="camera-canvas"></canvas>
        <div class="camera-controls">
            <button onclick="jarvis.captureFace()">üì∑ Capture</button>
            <button onclick="jarvis.closeCamera()">‚úï Close</button>
        </div>
    </div>

    <!-- APPS DRAWER -->
    <div class="apps-drawer hidden" id="apps-drawer">
        <div class="apps-grid">
            <button class="app-icon" onclick="jarvis.openCalculator()">üßÆ<span>Calculator</span></button>
            <button class="app-icon" onclick="jarvis.openTasks()">üìã<span>Tasks</span></button>
            <button class="app-icon" onclick="jarvis.openWeather()">üå§Ô∏è<span>Weather</span></button>
            <button class="app-icon" onclick="jarvis.openGame()">üéÆ<span>Quiz Game</span></button>
            <button class="app-icon" onclick="jarvis.openReminders()">‚è∞<span>Reminders</span></button>
            <button class="app-icon" onclick="jarvis.openNotebook()">üìì<span>Notebook</span></button>
        </div>
        <button class="close-drawer" onclick="jarvis.showApps()">‚úï</button>
    </div>

    <!-- MINI APPS (Overlays) -->
    
    <!-- Calculator -->
    <div class="mini-app hidden" id="calc-app">
        <div class="mini-app-header">
            <span>üßÆ Calculator</span>
            <button onclick="jarvis.closeMiniApp()">√ó</button>
        </div>
        <div class="calc-display" id="calc-display">0</div>
        <div class="calc-grid">
            <button onclick="jarvis.calc('C')">C</button>
            <button onclick="jarvis.calc('‚å´')">‚å´</button>
            <button onclick="jarvis.calc('%')">%</button>
            <button onclick="jarvis.calc('/')">√∑</button>
            <button onclick="jarvis.calc('7')">7</button>
            <button onclick="jarvis.calc('8')">8</button>
            <button onclick="jarvis.calc('9')">9</button>
            <button onclick="jarvis.calc('*')">√ó</button>
            <button onclick="jarvis.calc('4')">4</button>
            <button onclick="jarvis.calc('5')">5</button>
            <button onclick="jarvis.calc('6')">6</button>
            <button onclick="jarvis.calc('-')">‚àí</button>
            <button onclick="jarvis.calc('1')">1</button>
            <button onclick="jarvis.calc('2')">2</button>
            <button onclick="jarvis.calc('3')">3</button>
            <button onclick="jarvis.calc('+')">+</button>
            <button onclick="jarvis.calc('0')" class="calc-wide">0</button>
            <button onclick="jarvis.calc('.')">.</button>
            <button onclick="jarvis.calc('=')">=</button>
        </div>
    </div>

    <!-- Notebook -->
    <div class="mini-app hidden" id="notebook-app">
        <div class="mini-app-header">
            <span>üìì Notebook</span>
            <button onclick="jarvis.closeMiniApp()">√ó</button>
        </div>
        <div class="notebook-controls">
            <button onclick="jarvis.newNote()" class="note-btn new">+ New Note</button>
            <button onclick="jarvis.saveNote()" class="note-btn save">üíæ Save</button>
            <button onclick="jarvis.deleteNote()" class="note-btn delete">üóëÔ∏è Delete</button>
        </div>
        <div class="notebook-list" id="notebook-list">
            <div class="empty-notes">No notes yet</div>
        </div>
        <input type="text" id="note-title" placeholder="Note title..." class="note-title-input">
        <textarea id="note-content" placeholder="Write your note here..." class="note-content-area"></textarea>
    </div>

    <!-- Tasks -->
    <div class="mini-app hidden" id="tasks-app">
        <div class="mini-app-header">
            <span>üìã Tasks</span>
            <button onclick="jarvis.closeMiniApp()">√ó</button>
        </div>
        <div class="task-input-box">
            <input type="text" id="task-input" placeholder="Add new task...">
            <button onclick="jarvis.addTask()">+</button>
        </div>
        <div class="tasks-list" id="tasks-list">
            <div class="empty-tasks">No tasks yet</div>
        </div>
    </div>

    <!-- Weather -->
    <div class="mini-app hidden" id="weather-app">
        <div class="mini-app-header">
            <span>üå§Ô∏è Weather</span>
            <button onclick="jarvis.closeMiniApp()">√ó</button>
        </div>
        <div class="weather-search">
            <input type="text" id="weather-city" placeholder="Enter city...">
            <button onclick="jarvis.getWeather()">Search</button>
        </div>
        <div class="weather-display" id="weather-display">
            <div class="weather-main">
                <span class="weather-icon">‚òÄÔ∏è</span>
                <span class="weather-temp">--¬∞</span>
            </div>
            <div class="weather-details">
                <div class="weather-item">
                    <span>Humidity</span>
                    <span id="weather-humidity">--%</span>
                </div>
                <div class="weather-item">
                    <span>Wind</span>
                    <span id="weather-wind">-- km/h</span>
                </div>
                <div class="weather-item">
                    <span>Condition</span>
                    <span id="weather-condition">--</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Reminders -->
    <div class="mini-app hidden" id="reminders-app">
        <div class="mini-app-header">
            <span>‚è∞ Reminders</span>
            <button onclick="jarvis.closeMiniApp()">√ó</button>
        </div>
        <div class="reminder-input-box">
            <input type="text" id="reminder-text" placeholder="Reminder text...">
            <input type="datetime-local" id="reminder-time">
            <button onclick="jarvis.addReminder()">+</button>
        </div>
        <div class="reminders-list" id="reminders-list">
            <div class="empty-reminders">No reminders set</div>
        </div>
    </div>

    <!-- BACKDROP FOR SIDEBARS -->
    <div class="sidebar-backdrop" id="sidebar-backdrop" onclick="jarvis.closeAllSidebars()"></div>

    <script src="core.js"></script>
    <script src="features.js"></script>
    <script src="voice_vision.js"></script>
    <script src="app.js"></script>
</body>
</html>