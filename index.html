<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="theme-color" content="#000000">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>J.A.R.V.I.S. AI</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <!-- SPLASH SCREEN -->
    <div id="splash-screen">
        <div class="splash-content">
            <div class="splash-logo">J</div>
            <div class="splash-text">J.A.R.V.I.S.</div>
            <div class="splash-loading">
                <div class="splash-bar"></div>
            </div>
            <div class="splash-status" id="splash-status">Initializing...</div>
        </div>
    </div>

    <!-- MAIN APP -->
    <div id="app" class="hidden">
        
        <!-- TOP BAR -->
        <header class="top-bar">
            <button class="menu-btn" id="btn-left-menu" aria-label="Memory">‚ò∞</button>
            <div class="logo-mini">J.A.R.V.I.S.</div>
            <button class="menu-btn" id="btn-right-menu" aria-label="Settings">‚öôÔ∏è</button>
        </header>

        <!-- LEFT SIDEBAR (MEMORY) -->
        <aside class="sidebar left" id="sidebar-left">
            <div class="sidebar-header">
                <h3>üß† Memory Core</h3>
                <button class="close-sidebar" id="btn-close-left" aria-label="Close">√ó</button>
            </div>
            
            <div class="memory-stats-real">
                <div class="stat-card">
                    <div class="stat-value" id="mem-usage">0 KB</div>
                    <div class="stat-label">Storage</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="mem-facts">0</div>
                    <div class="stat-label">Facts</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="mem-convos">0</div>
                    <div class="stat-label">Chats</div>
                </div>
            </div>

            <div class="memory-visual">
                <div class="brain-visual">
                    <div class="brain-node" style="--delay:0s"></div>
                    <div class="brain-node" style="--delay:0.2s"></div>
                    <div class="brain-node" style="--delay:0.4s"></div>
                    <div class="brain-node" style="--delay:0.6s"></div>
                </div>
                <div class="memory-bar">
                    <div class="memory-fill" id="memory-fill"></div>
                </div>
                <div class="memory-text" id="memory-text">0% used</div>
            </div>

            <div class="user-profile-section">
                <h4>üë§ User Profile</h4>
                <div class="profile-item">
                    <span>Name:</span>
                    <span id="profile-name">Unknown</span>
                </div>
                <div class="profile-item">
                    <span>Age:</span>
                    <span id="profile-age">-</span>
                </div>
                <div class="profile-item">
                    <span>Location:</span>
                    <span id="profile-location">-</span>
                </div>
                <div class="profile-item">
                    <span>Mood:</span>
                    <span id="profile-mood">Neutral</span>
                </div>
            </div>

            <div class="stored-facts">
                <h4>üíæ Stored Facts</h4>
                <div id="facts-list" class="facts-scroll">
                    <div class="empty-facts">No facts stored yet</div>
                </div>
            </div>
        </aside>

        <!-- MAIN CHAT AREA -->
        <main class="chat-area">
            <div class="avatar-section">
                <div class="jarvis-avatar" id="jarvis-avatar">
                    <div class="avatar-face">
                        <div class="eye left"></div>
                        <div class="eye right"></div>
                        <div class="mouth"></div>
                    </div>
                    <div class="avatar-ring ring-1"></div>
                    <div class="avatar-ring ring-2"></div>
                    <div class="avatar-ring ring-3"></div>
                    <div class="sound-waves" id="sound-waves"></div>
                </div>
                <div class="status-text" id="status-text">Tap microphone to speak</div>
            </div>

            <div class="messages-container" id="messages-container">
                <div class="welcome-msg">
                    <h2>Hello, I'm J.A.R.V.I.S.</h2>
                    <p>Your personal AI assistant. I remember everything you tell me.</p>
                    <div class="quick-chips">
                        <button class="chip-btn" data-message="What can you do?">What can you do?</button>
                        <button class="chip-btn" data-message="Remember my name is Tony">Set my name</button>
                        <button class="chip-btn" data-action="openCalculator">Calculator</button>
                        <button class="chip-btn" data-action="openNotebook">Notebook</button>
                    </div>
                </div>
            </div>

            <div class="input-section">
                <div class="input-box">
                    <input type="text" id="chat-input" placeholder="Type your message..." autocomplete="off" enterkeyhint="send">
                    <button class="send-btn" id="btn-send" aria-label="Send">‚û§</button>
                </div>
                <div class="input-actions">
                    <button class="action-btn" id="btn-voice" aria-label="Voice">üé§</button>
                    <button class="action-btn" id="btn-camera" aria-label="Camera">üì∑</button>
                    <button class="action-btn" id="btn-apps" aria-label="Apps">üì±</button>
                </div>
            </div>
        </main>

        <!-- RIGHT SIDEBAR (SETTINGS) -->
        <aside class="sidebar right" id="sidebar-right">
            <div class="sidebar-header">
                <h3>‚öôÔ∏è Settings</h3>
                <button class="close-sidebar" id="btn-close-right" aria-label="Close">√ó</button>
            </div>

            <div class="settings-section">
                <h4>üé® Appearance</h4>
                <select id="theme-select">
                    <option value="jarvis">J.A.R.V.I.S. Blue</option>
                    <option value="friday">F.R.I.D.A.Y. Orange</option>
                    <option value="ultron">Ultron Red</option>
                    <option value="vision">Vision Green</option>
                    <option value="dark">Dark Mode</option>
                </select>
            </div>

            <div class="settings-section">
                <h4>üîä Voice</h4>
                <label class="toggle-label">
                    <span>Text-to-Speech</span>
                    <input type="checkbox" id="tts-toggle" checked>
                    <span class="toggle"></span>
                </label>
                <label class="toggle-label">
                    <span>Speech Recognition</span>
                    <input type="checkbox" id="stt-toggle" checked>
                    <span class="toggle"></span>
                </label>
                <label class="toggle-label">
                    <span>Auto-Speak</span>
                    <input type="checkbox" id="auto-speak-toggle" checked>
                    <span class="toggle"></span>
                </label>
            </div>

            <div class="api-section">
                <h4>üîå OpenRouter API</h4>
                
                <div class="api-card">
                    <div class="api-header">
                        <span>üåê API Status</span>
                        <span class="api-badge" id="badge-openrouter">OFFLINE</span>
                    </div>
                    <input type="password" id="api-openrouter" placeholder="Enter your API key (sk-or-v1-...)">
                    
                    <div class="model-section">
                        <label>Model ID</label>
                        <input type="text" id="model-id" placeholder="e.g., deepseek/deepseek-chat" value="deepseek/deepseek-chat">
                        <small class="model-help">Enter any OpenRouter model ID</small>
                    </div>
                    
                    <button id="btn-test-api">Connect API</button>
                </div>

                <div class="api-info">
                    <p>üí° <strong>How to get API key:</strong></p>
                    <ol>
                        <li>Go to <a href="https://openrouter.ai/keys" target="_blank">openrouter.ai/keys</a></li>
                        <li>Create a free account</li>
                        <li>Copy your API key</li>
                        <li>Paste it here securely</li>
                    </ol>
                    <p>üîí Your key is stored locally on your device only.</p>
                </div>
            </div>

            <div class="settings-section">
                <h4>‚ö†Ô∏è Capabilities</h4>
                <div class="limitation-list">
                    <div class="limit-item"><span>‚úÖ</span><span>AI Chat with OpenRouter</span></div>
                    <div class="limit-item"><span>‚úÖ</span><span>Voice Input/Output</span></div>
                    <div class="limit-item"><span>‚úÖ</span><span>Notebook & Tasks</span></div>
                    <div class="limit-item"><span>‚úÖ</span><span>Camera Access</span></div>
                    <div class="limit-item"><span>‚úÖ</span><span>Local Data Storage</span></div>
                </div>
            </div>

            <button class="danger-btn" id="btn-clear-data">üóëÔ∏è Clear All Data</button>
        </aside>

    </div>

    <!-- OVERLAYS -->
    
    <!-- CAMERA -->
    <div class="camera-overlay hidden" id="camera-overlay">
        <video id="camera-video" autoplay playsinline muted></video>
        <div class="camera-controls">
            <button id="btn-capture">üì∑ Capture</button>
            <button id="btn-close-camera">‚úï Close</button>
        </div>
    </div>

    <!-- APPS DRAWER -->
    <div class="apps-drawer hidden" id="apps-drawer">
        <div class="apps-grid">
            <button class="app-icon" data-app="calculator">üßÆ<span>Calculator</span></button>
            <button class="app-icon" data-app="notebook">üìì<span>Notebook</span></button>
            <button class="app-icon" data-app="tasks">üìã<span>Tasks</span></button>
            <button class="app-icon" data-app="weather">üå§Ô∏è<span>Weather</span></button>
            <button class="app-icon" data-app="reminders">‚è∞<span>Reminders</span></button>
            <button class="app-icon" data-app="game">üéÆ<span>Game</span></button>
        </div>
        <button class="close-drawer" id="btn-close-apps">‚úï</button>
    </div>

    <!-- MINI APPS -->
    
    <!-- Calculator -->
    <div class="mini-app hidden" id="calc-app">
        <div class="mini-app-header">
            <span>üßÆ Calculator</span>
            <button class="close-mini">√ó</button>
        </div>
        <div class="calc-display" id="calc-display">0</div>
        <div class="calc-grid">
            <button class="calc-btn" data-val="C">C</button>
            <button class="calc-btn" data-val="‚å´">‚å´</button>
            <button class="calc-btn" data-val="%">%</button>
            <button class="calc-btn" data-val="/">√∑</button>
            <button class="calc-btn" data-val="7">7</button>
            <button class="calc-btn" data-val="8">8</button>
            <button class="calc-btn" data-val="9">9</button>
            <button class="calc-btn" data-val="*">√ó</button>
            <button class="calc-btn" data-val="4">4</button>
            <button class="calc-btn" data-val="5">5</button>
            <button class="calc-btn" data-val="6">6</button>
            <button class="calc-btn" data-val="-">‚àí</button>
            <button class="calc-btn" data-val="1">1</button>
            <button class="calc-btn" data-val="2">2</button>
            <button class="calc-btn" data-val="3">3</button>
            <button class="calc-btn" data-val="+">+</button>
            <button class="calc-btn calc-wide" data-val="0">0</button>
            <button class="calc-btn" data-val=".">.</button>
            <button class="calc-btn" data-val="=">=</button>
        </div>
    </div>

    <!-- Notebook -->
    <div class="mini-app hidden" id="notebook-app">
        <div class="mini-app-header">
            <span>üìì Notebook</span>
            <button class="close-mini">√ó</button>
        </div>
        <div class="notebook-controls">
            <button id="btn-new-note" class="note-btn new">+ New</button>
            <button id="btn-save-note" class="note-btn save">üíæ Save</button>
            <button id="btn-delete-note" class="note-btn delete">üóëÔ∏è Delete</button>
        </div>
        <div class="notebook-list" id="notebook-list">
            <div class="empty-notes">No notes yet</div>
        </div>
        <input type="text" id="note-title" placeholder="Note title..." class="note-title-input">
        <textarea id="note-content" placeholder="Write your note here..." class="note-content-area"></textarea>
    </div>

    <!-- Tasks -->
    <div class="mini-app hidden" id="tasks-app">
        <div class="mini-app-header">
            <span>üìã Tasks</span>
            <button class="close-mini">√ó</button>
        </div>
        <div class="task-input-box">
            <input type="text" id="task-input" placeholder="Add new task...">
            <button id="btn-add-task">+</button>
        </div>
        <div class="tasks-list" id="tasks-list">
            <div class="empty-tasks">No tasks yet</div>
        </div>
    </div>

    <!-- Weather -->
    <div class="mini-app hidden" id="weather-app">
        <div class="mini-app-header">
            <span>üå§Ô∏è Weather</span>
            <button class="close-mini">√ó</button>
        </div>
        <div class="weather-search">
            <input type="text" id="weather-city" placeholder="Enter city...">
            <button id="btn-get-weather">Search</button>
        </div>
        <div class="weather-display" id="weather-display">
            <div class="weather-main">
                <span class="weather-icon">‚òÄÔ∏è</span>
                <span class="weather-temp">--¬∞</span>
            </div>
            <div class="weather-details">
                <div class="weather-item">
                    <span>Humidity</span>
                    <span id="weather-humidity">--%</span>
                </div>
                <div class="weather-item">
                    <span>Wind</span>
                    <span id="weather-wind">-- km/h</span>
                </div>
                <div class="weather-item">
                    <span>Condition</span>
                    <span id="weather-condition">--</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Reminders -->
    <div class="mini-app hidden" id="reminders-app">
        <div class="mini-app-header">
            <span>‚è∞ Reminders</span>
            <button class="close-mini">√ó</button>
        </div>
        <div class="reminder-input-box">
            <input type="text" id="reminder-text" placeholder="Reminder text...">
            <input type="datetime-local" id="reminder-time">
            <button id="btn-add-reminder">+</button>
        </div>
        <div class="reminders-list" id="reminders-list">
            <div class="empty-reminders">No reminders set</div>
        </div>
    </div>

    <!-- BACKDROP -->
    <div class="sidebar-backdrop" id="sidebar-backdrop"></div>

    <!-- ERROR TOAST -->
    <div class="toast hidden" id="toast">
        <span id="toast-message">Error message</span>
        <button onclick="hideToast()">√ó</button>
    </div>

    <!-- FALLBACK -->
    <script>
        setTimeout(function() {
            var splash = document.getElementById('splash-screen');
            var app = document.getElementById('app');
            if (splash && !splash.classList.contains('hidden')) {
                splash.classList.add('hidden');
                if (app) app.classList.remove('hidden');
            }
        }, 8000);
    </script>

    <script src="core.js"></script>
    <script src="voice_vision.js"></script>
    <script src="features.js"></script>
    <script src="app.js"></script>
</body>
</html>
